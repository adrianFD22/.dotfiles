#!/bin/sh

latex_dir="/home/adrian/Work/LaTeX/"

proj_dir=$(find $latex_dir -type d -exec sh -c '[ -f "$0"/main.tex ] && [ -f "$0"/main.pdf ]' '{}' \; -print | sed -e "s+^$latex_dir++" | dmenu -i -l 20 -p "LaTeX:" )
proj_dir="$latex_dir$proj_dir"

if ! [ -d "$proj_dir" ] || [ "$latex_dir" = "$proj_dir" ]; then
    exit 1
fi

xdg-open "$proj_dir/main.pdf"
terminal-init "cd \"$proj_dir\"; nvim main.tex"
